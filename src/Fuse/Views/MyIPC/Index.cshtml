<style>
    td div a {
        display: block;
    }

    th.sortable-header {
        cursor: pointer;
    }

        th.sortable-header:hover {
            background-color: #e6e6e6
        }

    .table-view-header {
        padding: 10px 15px;
    }
</style>
<p>
    Here is where our main MyIPC app is going to live. This will be where we can
    <ul>
        <li>Approve/Decline a user's access</li>
        <li>Add/Remove roles for a user</li>
    </ul>
</p>
<div class="table-view obj-user">
    <div class="table-view-header">
        <div class="clearfix">
            <h1>Users</h1>
        </div>
        <div class="clearfix">
            <div style="display: inline-block; font-size: 1.1em; margin-right: 10px;">
                <i class="fa fa-arrow-circle-left" data-bind="enabled: allUsers.previousPageEnabled() && !allUsers.isLoading(), click: allUsers.previousPage"></i>
                Page
                <input data-bind="value: allUsers.page" style="width: 35px">
                of
                <span data-bind="text: allUsers.pageCount"></span>
                <i class="fa fa-arrow-circle-right" data-bind="enabled: allUsers.nextPageEnabled() && !allUsers.isLoading(), click: allUsers.nextPage"></i>
            </div>
            <select class="form-control" style="width: 100px; display: inline-block;" data-bind="value: allUsers.pageSize">
                <option value="1">1</option>
                <option value="5">5</option>
                <option value="10">10</option>
                <option value="50">50</option>
                <option value="100">100</option>
                <option value="500">500</option>
                <option value="1000">1000</option>
            </select>
            <input class="form-control pull-right" style="width: 250px; margin-left: 20px" data-bind="textInput: allUsers.search" placeholder="Search" />
            <div class="btn-group pull-right">
                <button data-bind="click:allUsers.load" class="btn btn-sm btn-default "><i class="fa fa-refresh"></i> Refresh</button>
            </div>
        </div>
    </div>
    <hr />
    <div class="card table-view-body">
        <div class="card-body">
            <table class="table">
                <thead>
                    <tr>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Email Address</th>
                        <th>Status</th>
                        <th>Roles</th>
                        <th style="width: 1%"></th>
                    </tr>
                </thead>
                <tbody data-bind="foreach: allUsers.items">
                    <tr data-bind="css: {'btn-warning': errorMessage()}, attr: {id: id}">
                        <td>@(Knockout.DisplayFor<Fuse.Domain.Models.User>(p => p.FirstName, true))</td>
                        <td>@(Knockout.DisplayFor<Fuse.Domain.Models.User>(p => p.LastName, true))</td>
                        <td>@(Knockout.DisplayFor<Fuse.Domain.Models.User>(p => p.EmailAddress, true))</td>
                        <td>@(Knockout.DisplayFor<Fuse.Domain.Models.User>(p => p.EmailConfirmed, true))</td>
                        <td>@(Knockout.DisplayFor<Fuse.Domain.Models.User>(p => p.PhoneNumber, true))</td>
                        <td>
                            <a class="btn btn-default" data-bind="click: $parent.ApproveDecline">Approve/Decline</a>
                            <a class="btn btn-default" data-bind="click: $parent.ManageRoles">Manage Roles</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        var applicationName = 'myipc';
    </script>
<script src="~/js/GisUserManagement.js"></script>
}